.system-sfrpg {
  /* tagify integration */
  --tagify-dd-color-primary: var(--sfmod-color-primary);
  --tagify-dd-bg-color: var(--sfmod-color-background);
}

/* tagify integration */

.tagify {
  --tags-border-color: var(--sfmod-color-background);
  --tags-hover-border-color: var(--sfmod-color-primary);
  --tags-focus-border-color: var(--sfmod-color-secondary);
  --tag-bg: var(--sfmod-color-primary);
  --tag-hover: var(--sfmod-color-secondary);
  --tag-text-color: var(--sfmod-text-on-primary);
  --tag-text-color--edit: var(--sfmod-text-on-background);
  --tag-invalid-color: var(--sfmod-text-on-error);
  --tag-invalid-bg: var(--sfmod-color-error);
  --tag-remove-bg: var(--sfmod-color-error);
  --tag-remove-btn-bg: none;
  --tag-remove-btn-bg--hover: var(--sfmod-color-error);
  --placeholder-color: var(--sfmod-text-on-background);
}

.system-sfrpg {
  --sfmod-color-surface: var(--sfmod-color-surface-wbr) !important;
  --sfmod-font-variant: small-caps;
}

.system-sfrpg :not(span[style*="color:"]) > strong {
  color: var(--sfmod-text-on-selection);
}

.journal-entry-content,
.journal-sidebar {
  background: var(--sfmod-color-surface) !important;
}

.sfrpg.sheet .journal-entry-content h2,
.system-sfrpg h2,
.sfrpg.sheet .journal-entry-content h1,
.system-sfrpg h1 {
  color: var(--sfmod-color-primary);
  border-bottom: 1px solid var(--sfmod-color-primary);
}

.system-sfrpg .journal-entry-content h3,
.system-sfrpg .journal-entry-content h4,
.system-sfrpg .journal-entry-content h5,
.system-sfrpg .journal-entry-content h6 {
  font-variant: var(--sfmod-font-variant, inherit);
  color: var(--sfmod-text-on-selection);
}

.system-sfrpg blockquote {
  quotes: "\201C""\201D""\2018""\2019";
  background: var(--sfmod-color-surface);
  border-left: 5px solid var(--sfmod-color-secondary);
  margin: 15px 5px;
  padding: 5px 10px;
  text-align: justify;
}

.system-sfrpg blockquote:before {
  content: open-quote;
  font-size: 4em;
  line-height: 0.1em;
  margin-right: 0.1em;
  margin-left: -15px;
  color: var(--sfmod-color-secondary);
  vertical-align: -0.4em;
}

.sfrpg.sheet .journal-entry-content h3,
.sfrpg.sheet .item-summary h3 {
  color: var(--sfmod-color-primary);
}

.system-sfrpg #player-config label {
  color: var(--sfmod-text-on-background);
}

.system-sfrpg input[type="color"] {
  background: var(--sfmod-color-surface);
  border-color: var(--sfmod-border-on-background);
}

.system-sfrpg img {
  border-color: var(--sfmod-border-on-background);
}

.system-sfrpg textarea:not([name="command"]),
.system-sfrpg input[type="text"],
.system-sfrpg input[type="number"],
.system-sfrpg input[type="password"],
.system-sfrpg input[type="date"],
.system-sfrpg input[type="search"],
.system-sfrpg input[type="time"],
.system-sfrpg .directory .directory-header .header-search input {
  color: var(--sfmod-text-on-background);
  background: var(--sfmod-color-background);
  border-color: var(--sfmod-border-on-background-light);
}

.sfrpg.sheet .journal-sheet-container .tox-tinymce {
  background: #ffffff;
}

.sfrpg.sheet.actor .inventory-list .item-controls a,
.sfrpg.sheet.actor .crew-list .item-controls a,
.sfrpg.sheet.actor .inventory-list .crew-controls a,
.sfrpg.sheet.actor .crew-list .crew-controls a {
  color: var(--sfmod-text-on-background-light);
}

.sfrpg.sheet.actor .inventory-list .item-detail,
.sfrpg.sheet.actor .crew-list .item-detail,
.sfrpg.sheet.actor .inventory-list .crew-detial,
.sfrpg.sheet.actor .crew-list .crew-detial {
  color: var(--sfmod-text-on-background-light);
  border-right-color: var(--sfmod-border-on-background);
}

.system-sfrpg #sidebar .sidebar-tab {
  backdrop-filter: blur(var(--sfmod-blur-radius));
  -webkit-backdrop-filter: blur(var(--sfmod-blur-radius));
}

.sfrpg.sheet .window-content {
  border-color: var(--sfmod-color-primary-variant);
}

.sfrpg.sheet.actor .sheet-header .header-background {
  background: var(--sfmod-color-secondary-gradient);
}

.system-sfrpg .window-app .window-header {
  background: var(--sfmod-color-primary-gradient);
  color: var(--sfmod-text-on-primary);
}

.sfrpg.sheet .sheet-navigation .item {
  color: var(--sfmod-text-on-primary);
}

.sfrpg.sheet .sheet-navigation .item.active {
  background: var(--sfmod-color-secondary);
  color: var(--sfmod-text-on-secondary);
}

.system-sfrpg .tabs a.item:hover,
.system-sfrpg #navigation #scene-list .scene.view,
.system-sfrpg #navigation #scene-list .scene.context,
.system-sfrpg #controls .scene-control.active,
.system-sfrpg #controls .control-tool.active,
.system-sfrpg #controls .scene-control:hover,
.system-sfrpg #controls .control-tool:hover,
.system-sfrpg #sidebar-tabs > .item.active,
.system-sfrpg #sidebar-tabs {
  border-color: var(--sfmod-color-secondary);
  border-bottom-color: var(--sfmod-color-secondary-light);
  box-shadow: 0 0 10px var(--sfmod-color-secondary-light);
  background: var(--sfmod-color-surface);
}

.sfrpg.sheet .sheet-navigation .item.active:hover {
  color: var(--sfmod-text-on-secondary) !important;
}

.system-sfrpg #navigation #scene-list .scene {
  border-color: var(--sfmod-color-primary);
  background: var(--sfmod-color-primary-variant);
  border-bottom-color: var(--sfmod-color-primary);
  box-shadow: 0 0 10px var(--sfmod-color-primary);
}

.system-sfrpg #navigation #scene-list .scene.gm {
  border-color: var(--sfmod-color-primary);
  background: var(--sfmod-color-surface);
  border-bottom-color: var(--sfmod-color-primary-light);
  box-shadow: 0 0 10px var(--sfmod-color-primary-light);
  opacity: .85;
}

.system-sfrpg #chat-controls .roll-type-select {
  background: var(--sfmod-color-background);
  color: var(--sfmod-text-on-background);
}

.system-sfrpg #chat-form textarea,
.sidebar-tab .directory-header .header-search input,
.system-sfrpg
  .monks-journal-sheet
  .directory
  .directory-header
  .header-search
  input {
  background: var(--sfmod-color-background);
  color: var(--sfmod-text-on-background);
}

.system-sfrpg select {
  background: var(--sfmod-color-background) !important;
}
.system-sfrpg select optgroup,
.system-sfrpg select option {
  background-color: var(--sfmod-color-background) !important;
}

.system-sfrpg a.content-link,
.system-sfrpg a.inline-roll {
  border: 1px solid var(--sfmod-color-primary);
  color: var(--sfmod-color-primary);
}

.system-sfrpg .message-header h4.message-sender {
  color: var(--sfmod-color-primary);
}

.system-sfrpg .chat-message .message-header {
  color: var(--sfmod-text-on-background-light);
}

.system-sfrpg .message-header {
  background-color: transparent;
}

.sfrpg.sheet .window-content,
.system-sfrpg .window-app .window-content {
  background: var(--sfmod-color-surface);
  color: var(--sfmod-text-on-background) !important;
  backdrop-filter: blur(var(--sfmod-blur-radius));
  -webkit-backdrop-filter: blur(var(--sfmod-blur-radius));
}

.system-sfrpg #chat-log .message {
  background: var(--sfmod-color-background);
  color: var(--sfmod-text-on-background) !important;
}

.system-sfrpg #chat-log .message .message-content h2 {
  position: unset;
}

.system-sfrpg #module-management .package-list .package-title,
.system-sfrpg #module-management .package-list .package-metadata,
.system-sfrpg #module-management .package-list .package-description,
.sfrpg.sheet.actor .sheet-header .header-background .charname > input {
  color: var(--sfmod-text-on-background);
}

.sfrpg.sheet .sheet-navigation {
  background: var(--sfmod-color-primary-gradient);
}

.system-sfrpg form .form-header,
.sfrpg.sheet .sheet-header,
.sfrpg button {
  color: var(--sfmod-text-on-background);
}

.system-sfrpg .sfrpg.sheet .sheet-header .summary li,
.system-sfrpg .sfrpg .form-group label,
.system-sfrpg .sfrpg.chat-card .card-header h3,
.system-sfrpg .chat-card-custom .chat-card-custom-item p span {
  color: var(--sfmod-text-on-background-light);
}

.sfrpg.sheet.actor .inventory-list .item .item-name .item-action .attack,
.sfrpg.sheet.actor .crew-list .item .item-name .item-action .attack,
.sfrpg.sheet.actor .vehicle-system-list .item .item-name .item-action .attack,
.sfrpg.sheet.actor .inventory-list .crew .item-name .item-action .attack,
.sfrpg.sheet.actor .crew-list .crew .item-name .item-action .attack,
.sfrpg.sheet.actor .vehicle-system-list .crew .item-name .item-action .attack,
.sfrpg.sheet.actor .inventory-list .item .crew-name .item-action .attack,
.sfrpg.sheet.actor .crew-list .item .crew-name .item-action .attack,
.sfrpg.sheet.actor .vehicle-system-list .item .crew-name .item-action .attack,
.sfrpg.sheet.actor .inventory-list .crew .crew-name .item-action .attack,
.sfrpg.sheet.actor .crew-list .crew .crew-name .item-action .attack,
.sfrpg.sheet.actor .vehicle-system-list .crew .crew-name .item-action .attack {
  width: auto;
  background: var(--sfmod-color-primary-variant);
  color: var(--sfmod-text-on-primary);
  cursor: pointer;
}

.system-sfrpg a.content-link,
.system-sfrpg a.inline-roll {
  background: var(--color-border-dark-1);
}

.system-sfrpg input[type="text"],
.system-sfrpg .sidebar-tab .directory-header .header-search input,
.system-sfrpg select,
.system-sfrpg .gm-screen-app .gm-screen-grid-cell-header select,
.sfrpg select,
.sfrpg .form-group label,
.sfrpg .window-content,
.system-sfrpg input[type="text"],
.system-sfrpg input[type="number"],
.system-sfrpg input[type="password"],
.system-sfrpg input[type="date"],
.system-sfrpg input[type="time"] {
  color: var(--sfmod-text-on-background) !important;
  background-image: none;
}

.system-sfrpg input[type="text"]::placeholder,
.system-sfrpg #chat-form textarea,
.sidebar-tab .directory-header .header-search input::placeholder,
.system-sfrpg .sidebar-tab .directory-header .header-search input,
form .notes,
form .hint {
  color: var(--sfmod-text-on-surface);
}

.system-sfrpg button:hover,
.system-sfrpg button:focus {
  box-shadow: 0 0 5px var(--sfmod-color-primary);
  color: var(--sfmod-color-primary);
}

.sfrpg.sheet .editable .rollable:hover,
.sfrpg.chat-card .card-header h3:hover {
  text-shadow: 0 0 5px var(--sfmod-color-primary);
  color: var(--sfmod-color-primary-light);
}

.system-sfrpg select:focus,
.system-sfrpg textarea:focus,
.system-sfrpg textarea:focus,
.system-sfrpg input[type="text"]:focus,
.system-sfrpg input[type="number"]:focus,
.system-sfrpg input[type="password"]:focus,
.system-sfrpg input[type="date"]:focus,
.system-sfrpg input[type="time"]:focus,
.sfrpg input[type="text"]:hover,
.sfrpg input[type="text"]:focus {
  box-shadow: 0 0 8px var(--sfmod-color-primary);
  outline: 2px solid var(--sfmod-color-primary-light);
  outline-offset: -2px;
}

.system-sfrpg a:hover {
  text-shadow: 0 0 8px var(--sfmod-color-primary);
  color: var(--sfmod-color-primary-light) !important;
}

.system-sfrpg .tabs .item.active {
  text-shadow: 0 0 10px var(--sfmod-color-secondary);
  color: var(--sfmod-text-on-background);
}

.system-sfrpg .sheet-tabs.tabs .item.active {
  color: var(--sfmod-color-secondary);
}

.system-sfrpg #hotbar .macro.active:hover {
  border: 1px solid var(--sfmod-color-primary-primary);
}

.system-sfrpg #hotbar .macro:hover {
  box-shadow: 0 0 10px var(--sfmod-color-primary-light) inset;
}

#context-menu li.context-item:hover {
  color: var(--sfmod-color-primary);
  text-shadow: 0 0 4px var(--sfmod-color-primary);
}

.system-sfrpg button {
  background: rgba(0, 0, 0, 0.1) !important;
  border: 2px groove var(--sfmod-text-on-background) !important;
  color: var(--sfmod-text-on-background);
}

.sfrpg.sheet.actor .inventory-filters .currency label,
.sfrpg.sheet.actor .inventory-filters h3,
.sfrpg.sheet.actor .inventory-filters .filter-title,
.sfrpg.sheet.actor.starship .crew-settings h3,
.sfrpg.sheet.actor.starship .crew-settings .filter-title {
  color: var(--sfmod-text-on-surface);
}

.sfrpg.sheet .filter-list .filter-item.active,
.sfrpg.sheet .sheet-subnavigation .item.active,
.system-sfrpg nav.list-filters a.filter.active {
  border-bottom-color: var(--sfmod-color-secondary);
}

.sfrpg.sheet .filter-list .filter-item.active,
.sfrpg.sheet .sheet-subnavigation .item.active {
  border-bottom: 3px solid var(--sfmod-color-secondary);
}

.sfrpg.sheet .filter-list .filter-item:hover,
.sfrpg.sheet .sheet-subnavigation .item:hover {
  text-shadow: 0 0 4px var(--sfmod-color-secondary);
  border-bottom: 3px solid var(--sfmod-color-secondary-light);
  color: unset !important;
}

.system-sfrpg
  .sfrpg.item-browser-window
  .item-browser
  .header
  .item-sort-link:hover {
  text-shadow: 0 0 10px var(--sfmod-color-secondary),
    0 0 5px var(--sfmod-color-secondary);
  color: unset !important;
}

.sfrpg.sheet.actor.starship .sheet-body a.critical-edit,
.sfrpg.sheet.actor.starship .sheet-body i.fas {
  color: inherit;
}

.system-sfrpg .filepicker .display-modes a.active {
  text-shadow: 0 0 6px var(--sfmod-color-secondary);
  border-color: var(--sfmod-color-secondary);
  background: transparent;
  color: var(--sfmod-color-secondary);
}

.system-sfrpg .filepicker .display-modes a {
  border-color: var(--sfmod-text-on-background);
  background: transparent;
}

.system-sfrpg .filepicker .tabs .item.active {
  text-shadow: 0 0 10px var(--sfmod-color-secondary);
  color: var(--sfmod-color-secondary);
}

.system-sfrpg .dice-roll .dice-result {
  overflow: auto;
}

/*
sheets borders
*/

.sfrpg.sheet .sheet-header .summary-row2 li,
.sfrpg.sheet.actor .counters,
.sfrpg.sheet .sheet-header .summary-row1,
.sfrpg.sheet .sheet-header .summary-row2,
.sfrpg.sheet.actor.drone .ability-scores .ability h4.box-title,
.sfrpg.sheet.actor.drone .sheet-header .summary,
.sfrpg.sheet.actor.drone .sheet-header .attributes .attribute,
.sfrpg.sheet.actor.drone ul.skills-list li.skills-header,
.sfrpg.sheet.actor.drone .ability-scores .ability,
.sfrpg.sheet.actor.drone
  .ability-scores
  .ability
  .ability-modifiers
  span.ability-mod,
.system-sfrpg .compendium .directory-list .directory-item,
.sfrpg.item-browser-window .item-browser .filtercontainer,
.sfrpg.item-browser-window .item-browser .sortcontainer,
.sfrpg.sheet.actor ul.attributes li.attribute,
.sfrpg.sheet.actor.starship .sheet-header .attributes .attribute,
.sfrpg.sheet .sheet-header .summary li,
.sfrpg.sheet .sheet-header .summary,
.sfrpg.sheet .sheet-header .summary-row1 li,
.sfrpg.sheet.actor.starship .sheet-header .summary,
.sfrpg.sheet .sheet-header img.profile,
.sfrpg.sheet .sheet-header,
.sfrpg.sheet.actor .inventory-list .inventory-header,
.sfrpg.sheet.actor .crew-list .inventory-header,
.sfrpg.sheet.actor .inventory-list .crew-header,
.sfrpg.sheet.actor .crew-list .crew-header,
.sfrpg.sheet.actor .inventory-list .item,
.sfrpg.sheet.actor .crew-list .item,
.sfrpg.sheet.actor .inventory-list .crew,
.sfrpg.sheet.actor .crew-list .crew,
.sfrpg.sheet.actor.starship .action-list .action-header,
.sfrpg.sheet.actor.starship .action-list .action,
.sfrpg .form-header,
.sfrpg.sheet.actor.character .sheet-header .attributes .attribute,
.sfrpg.sheet.actor.character .sheet-header .summary,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-header
  input[type="text"].ability-drain,
.sfrpg.sheet.actor.character .ability-scores .ability,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-header
  input[type="text"].ability-penalty,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-modifiers
  input[type="text"].ability-base,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-header
  input[type="text"].ability-damage,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-modifiers
  span.ability-mod,
.sfrpg.sheet.actor.character
  .ability-scores
  .ability
  .ability-modifiers
  input[type="text"].ability-base,
.sfrpg.sheet.actor.npc
  .ability-scores
  .ability
  .ability-modifiers
  input[type="text"].ability-base,
.sfrpg.sheet.actor.npc .ability-scores .ability h4.new-box-title,
.sfrpg.sheet.actor.npc ul.attributes li.attribute h4.new-box-title,
.sfrpg.sheet.actor.npc
  ul.attributes
  li.attribute
  .attrib-modifiers
  input[type="text"].attrib-base,
.sfrpg.sheet.actor.npc ul.skills-list li.skills-header,
.sfrpg.sheet.actor .spell-school,
.sfrpg.sheet.actor .spell-action,
.sfrpg.sheet.actor .spell-comps,
.sfrpg.sheet.actor .spell-slots,
.sfrpg.sheet.actor ul.skills-list,
.sfrpg.sheet.actor.character ul.skills-list li.skills-header,
.sfrpg.sheet.actor .inventory-list .item-detail,
.sfrpg.sheet.actor .crew-list .item-detail,
.sfrpg.sheet.actor .inventory-list .crew-detial,
.sfrpg.sheet.actor .crew-list .crew-detial,
.sfrpg.sheet.actor .ability-scores .ability,
.sfrpg.sheet.actor ul.attributes.last,
.sfrpg.sheet.actor h4.box-title,
.sfrpg.sheet.actor.character .ability-scores .ability h4.box-title,
.sfrpg.sheet.actor .inventory-list .inventory-header,
.sfrpg.sheet.actor .crew-list .inventory-header,
.sfrpg.sheet.actor .vehicle-system-list .inventory-header,
.sfrpg.sheet.actor .inventory-list .crew-header,
.sfrpg.sheet.actor .crew-list .crew-header,
.sfrpg.sheet.actor .vehicle-system-list .crew-header,
.sfrpg.sheet.actor .inventory-list .item-detail,
.sfrpg.sheet.actor .crew-list .item-detail,
.sfrpg.sheet.actor .vehicle-system-list .item-detail,
.sfrpg.sheet.actor .inventory-list .crew-detial,
.sfrpg.sheet.actor .crew-list .crew-detial,
.sfrpg.sheet.actor .vehicle-system-list .crew-detial,
.sfrpg.sheet.actor .inventory-list .item,
.sfrpg.sheet.actor .crew-list .item,
.sfrpg.sheet.actor .vehicle-system-list .item,
.sfrpg.sheet.actor .inventory-list .crew,
.sfrpg.sheet.actor .crew-list .crew,
.sfrpg.sheet.actor .vehicle-system-list .crew,
.sfrpg.sheet.actor .inventory-list .item-summary,
.sfrpg.sheet.actor .crew-list .item-summary,
.sfrpg.sheet.actor .vehicle-system-list .item-summary,
.sfrpg.sheet.actor .inventory-list .crew-summary,
.sfrpg.sheet.actor .crew-list .crew-summary,
.sfrpg.sheet.actor .vehicle-system-list .crew-summary,
.sfrpg.sheet.actor .sheet-body .bio-properties,
.sfrpg.sheet.actor.starship .action-list .action .item-summary,
.sfrpg.sheet.item .inventory-list .item-detail,
.sfrpg.sheet.item .inventory-list .inventory-header,
.sfrpg.sheet.item .sheet-body .item-properties,
.sfrpg.sheet.item .inventory-list .item {
  border-color: var(--sfmod-border-on-background) !important;
}

.system-sfrpg form .form-group span.units {
  color: var(--sfmod-text-on-surface);
}

.sfrpg.sheet.actor.vehicle .passenger-action .pilotPilotingSkill:hover,
.sfrpg.sheet.actor.vehicle .passenger-action .pilotPilotingSkill:focus {
  filter: invert(1) sepia(1) saturate(10) hue-rotate(119deg);
}

.sfrpg.item-browser-window .item-browser li.item:hover {
  background: unset;
  outline: 1px solid var(--sfmod-color-primary);
  color: var(--sfmod-color-primary);
  box-shadow: inset 0 0 6px 0px var(--sfmod-color-primary);
}

.system-sfrpg .tabs a.item:hover {
  color: inherit !important;
  text-shadow: 0 0 8px var(--sfmod-color-secondary);
}

.system-sfrpg .tabs.sheet-navigation a.item:hover {
  box-shadow: inset 0 0 8px var(--sfmod-color-secondary);
  color: inherit !important;
  outline: 1px solid var(--sfmod-color-secondary-light);
  text-shadow: unset;
}

.system-sfrpg #sidebar-tabs.tabs a.item:hover {
  box-shadow: inset 0 0 8px var(--sfmod-color-secondary);
}

.system-sfrpg .sidebar-tab .directory-footer {
  display: flex;
  flex-direction: column;
  padding: 2px;
}

.system-sfrpg .sidebar-tab .directory-footer > * {
  flex-grow: 1;
}

.system-sfrpg .directory .action-buttons button{
  margin: 4px 0;
}

.system-sfrpg a.content-link i,
.system-sfrpg a.inline-roll i {
  color: unset;
}

.system-sfrpg .tox.tox-tinymce {
  background: #ffffff;
}

.system-sfrpg
  .sfrpg.sheet.actor
  .inventory-filters
  .currency
  label.currency-value {
  color: var(--sfmod-text-on-background-light);
}

.system-sfrpg tags.tagify.token-action-hud-taginput {
  background: var(--sfmod-color-background) !important;
  color: var(--sfmod-text-on-background) !important;
  border: 1px solid var(--sfmod-border-on-background-light);
  border-radius: 3px;
  margin: 8px 0;
  overflow: hidden;
}

.system-sfrpg .tagify__tag--editable > div::before {
  background: var(--sfmod-color-surface);
}

.system-sfrpg #context-menu li.context-item {
  backdrop-filter: none;
}

.system-sfrpg #pause h3 {
  text-shadow: 1px 1px 30px #000, 0px 0px 12px var(--sfmod-color-primary),
    0px 0px 8px var(--sfmod-color-primary-light),
    0px 0px 4px var(--sfmod-color-primary), 0px 0px 2px #000;
}

.system-sfrpg #controls-reference ol.hotkey-list .key {
  background: var(--sfmod-color-background);
  color: var(--sfmod-text-on-background);
}

.system-sfrpg #controls-reference ol.hotkey-list li.gm .key {
  background: var(--sfmod-color-background);
  color: var(--sfmod-color-primary-light);
}

.sfrpg.sheet.actor.character .sheet-header .charlevel .xpbar .bar {
  background: var(--sfmod-color-primary);
}

.sfrpg.sheet.actor.character .encumbrance .encumbrance-bar {
  background: var(--sfmod-color-primary);
  border: 1px solid var(--sfmod-color-primary-light);
}

::-webkit-scrollbar-thumb {
  background: var(--sfmod-color-secondary);
  border: 1px solid var(--sfmod-color-secondary-light);
}

:root {
  scrollbar-color: var(--sfmod-color-secondary) #111;
}

::-webkit-slider-thumb {
  background: var(--sfmod-color-secondary) !important;
}

::-moz-range-thumb {
  background: var(--sfmod-color-secondary) !important;
}

.sfrpg.sheet.actor .crew-list .crew-item-list {
  margin-left: 12px;
}

.sfrpg.sheet.actor.starship .action-header .action-name,
.sfrpg.sheet.actor .inventory-list .inventory-header h3,
.sfrpg.sheet.actor .crew-list .inventory-header h3,
.sfrpg.sheet.actor .vehicle-system-list .inventory-header h3,
.sfrpg.sheet.actor .inventory-list .crew-header h3,
.sfrpg.sheet.actor .crew-list .crew-header h3,
.sfrpg.sheet.actor .crew-list .crew-header[data-type="shipsCrew"],
.sfrpg.sheet.actor .vehicle-system-list .crew-header h3 {
  text-shadow: -1px -1px 0 var(--sfmod-color-primary-light),
    1px -1px 0 var(--sfmod-color-primary-light),
    -1px 1px 0 var(--sfmod-color-primary-light),
    1px 1px 0 var(--sfmod-color-primary-light),
    -1px 1px 3px var(--sfmod-color-primary),
    -1px -1px 3px var(--sfmod-color-primary),
    1px 1px 3px var(--sfmod-color-primary),
    1px -1px 3px var(--sfmod-color-primary);
  color: #000;
  font-size: 1.45em;
  font-variant: petite-caps;
  padding-left: 5px;
  padding-right: 0px;
  letter-spacing: -0.2px;
}

.sfrpg.sheet.actor .inventory-list .inventory-header.disabled h3,
.sfrpg.sheet.actor .crew-list .inventory-header.disabled h3,
.sfrpg.sheet.actor .vehicle-system-list .inventory-header.disabled h3,
.sfrpg.sheet.actor .inventory-list .crew-header.disabled h3,
.sfrpg.sheet.actor .crew-list .crew-header.disabled h3,
.sfrpg.sheet.actor .vehicle-system-list .crew-header.disabled h3 {
  text-shadow: -1px -1px 1px var(--sfmod-color-primary),
    1px -1px 1px var(--sfmod-color-primary),
    -1px 1px 1px var(--sfmod-color-primary),
    1px 1px 1px var(--sfmod-color-primary), 0 0 6px var(--sfmod-color-primary);
  color: #000;
  opacity: 0.45;
}

.sfrpg.chat-card.combat-card .card-content h2[style*="background-color:Salmon"],
.sfrpg.chat-card.combat-card
  .card-content
  h2[style*="background-color:LightGreen"] {
  color: var(--sfmod-color-secondary);
  text-transform: uppercase;
  font-size: 1.7em;
  font-weight: bold;
  line-height: 1.8em;
  padding: 0;
  display: block;
  margin: 5px auto;
  border: 10px double var(--sfmod-color-secondary);
  background: none !important;
}

.sfrpg.chat-card.combat-card
  .card-content
  h2[style*="background-color:LightGreen"] {
  color: var(--sfmod-color-primary);
  border-color: var(--sfmod-color-primary) !important;
}

.system-sfrpg .placeable-hud .control-icon.active {
  box-shadow: 0 0 10px var(--sfmod-color-secondary) inset !important;
}

.system-sfrpg .control-icon.active > img {
  filter: none;
  opacity: 0.9;
}

.system-sfrpg .directory .directory-list .directory-item.context,
.system-sfrpg .directory .directory-list .directory-item.active {
  border-color: var(--sfmod-color-secondary) !important;
}
.system-sfrpg #keybindings .binding .key.uneditable {
  background: #cac9c510;
}
/* ************************************************************************* */
/* ***    COMPACT MODE CSS RULES                                         *** */
/* ************************************************************************* */

.sfmod-compact.system-sfrpg #compendium li.compendium-pack {
  line-height: 10px;
}

.sfmod-compact.system-sfrpg .directory .directory-list .directory-item h4 {
  margin: 0px 0px 0px 7px;
  white-space: nowrap;
  overflow: hidden;
  font-size: 1.1em;
  font-variant: var(--sfmod-font-variant, inherit);
  letter-spacing: 1px;
}

.sfmod-compact.system-sfrpg #compendium li.compendium-pack .compendium-footer {
  font-size: 13px;
  font-variant: all-small-caps;
  padding-left: 22px;
}

.sfmod-compact.system-sfrpg #compendium li.compendium-pack .status-icons {
  top: 5px;
}

.sfmod-compact.system-sfrpg #compendium h3 {
  background: var(--sfmod-color-background);
  color: var(--sfmod-text-on-background-light);
  font-size: 1.1em;
  text-transform: uppercase;
}

.sfmod-compact.system-sfrpg #compendium li.compendium-pack .pack-title i {
  margin-right: 3px;
  font-size: 0.8em;
  width: 13px;
}

.sfmod-compact.system-sfrpg
  #compendium
  li[data-open="1"].compendium-pack
  .pack-title
  i.folder {
  color: var(--sfmod-color-primary-light);
}

.sfmod-compact.system-sfrpg .compendium .directory-list .directory-item {
  line-height: 35px;
  word-spacing: -1px;
  height: 35px;
  border-top: none;
}

.sfmod-compact.system-sfrpg .compendium .directory-list .directory-item img {
  height: 34px;
  width: 34px;
  flex: 0 0 34px;
  margin: 0 5px 0 0;
}

/* font size */
.system-sfrpg #chat-log {
  font-size: var(--sfmod-chat-font-size, 12px);
}

.system-sfrpg #chat-log .message,
.system-sfrpg .sfrpg.chat-card,
.system-sfrpg .sfrpg.chat-card .card-content {
  font-size: 1em;
}

.system-sfrpg .chat-message .message-header {
  font-size: 1.2em;
}

.system-sfrpg .chat-message .message-header .flavor-text,
.system-sfrpg .chat-message .message-header .whisper-to {
  font-size: 0.9em;
}

.system-sfrpg .chat-message .message-header .message-sender {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  flex-grow: 7;
}

.sfrpg.sheet.actor .inventory-list .item .item-name .item-action .use,
.sfrpg.sheet.actor .crew-list .item .item-name .item-action .use,
.sfrpg.sheet.actor .vehicle-system-list .item .item-name .item-action .use,
.sfrpg.sheet.actor .inventory-list .crew .item-name .item-action .use,
.sfrpg.sheet.actor .crew-list .crew .item-name .item-action .use,
.sfrpg.sheet.actor .vehicle-system-list .crew .item-name .item-action .use,
.sfrpg.sheet.actor .inventory-list .item .crew-name .item-action .use,
.sfrpg.sheet.actor .crew-list .item .crew-name .item-action .use,
.sfrpg.sheet.actor .vehicle-system-list .item .crew-name .item-action .use,
.sfrpg.sheet.actor .inventory-list .crew .crew-name .item-action .use,
.sfrpg.sheet.actor .crew-list .crew .crew-name .item-action .use,
.sfrpg.sheet.actor .vehicle-system-list .crew .crew-name .item-action .use {
  color: var(--sfmod-text-on-background);
}
.sfrpg.sheet.actor .inventory-list .item .item-name .item-action .use:hover,
.sfrpg.sheet.actor .crew-list .item .item-name .item-action .use:hover,
.sfrpg.sheet.actor
  .vehicle-system-list
  .item
  .item-name
  .item-action
  .use:hover,
.sfrpg.sheet.actor .inventory-list .crew .item-name .item-action .use:hover,
.sfrpg.sheet.actor .crew-list .crew .item-name .item-action .use:hover,
.sfrpg.sheet.actor
  .vehicle-system-list
  .crew
  .item-name
  .item-action
  .use:hover,
.sfrpg.sheet.actor .inventory-list .item .crew-name .item-action .use:hover,
.sfrpg.sheet.actor .crew-list .item .crew-name .item-action .use:hover,
.sfrpg.sheet.actor
  .vehicle-system-list
  .item
  .crew-name
  .item-action
  .use:hover,
.sfrpg.sheet.actor .inventory-list .crew .crew-name .item-action .use:hover,
.sfrpg.sheet.actor .crew-list .crew .crew-name .item-action .use:hover,
.sfrpg.sheet.actor
  .vehicle-system-list
  .crew
  .crew-name
  .item-action
  .use:hover,
.sfrpg.sheet.actor .inventory-list .item .item-name .item-action .use:focus,
.sfrpg.sheet.actor .crew-list .item .item-name .item-action .use:focus,
.sfrpg.sheet.actor
  .vehicle-system-list
  .item
  .item-name
  .item-action
  .use:focus,
.sfrpg.sheet.actor .inventory-list .crew .item-name .item-action .use:focus,
.sfrpg.sheet.actor .crew-list .crew .item-name .item-action .use:focus,
.sfrpg.sheet.actor
  .vehicle-system-list
  .crew
  .item-name
  .item-action
  .use:focus,
.sfrpg.sheet.actor .inventory-list .item .crew-name .item-action .use:focus,
.sfrpg.sheet.actor .crew-list .item .crew-name .item-action .use:focus,
.sfrpg.sheet.actor
  .vehicle-system-list
  .item
  .crew-name
  .item-action
  .use:focus,
.sfrpg.sheet.actor .inventory-list .crew .crew-name .item-action .use:focus,
.sfrpg.sheet.actor .crew-list .crew .crew-name .item-action .use:focus,
.sfrpg.sheet.actor
  .vehicle-system-list
  .crew
  .crew-name
  .item-action
  .use:focus {
  box-shadow: 0 0 5px var(--sfmod-color-primary);
}
.sfrpg.sheet.actor .proficient .proficiency-toggle {
  color: var(--sfmod-color-primary);
}
.system-sfrpg .sfrpg.document-browser-window .document-browser li.item:hover {
  box-shadow: 0 0 5px var(--sfmod-color-primary);
  color: var(--sfmod-color-primary);
  background: none;
}

/* Chat Messages - Simplified Dark Theme */
.system-sfrpg.system-sfrpg .app.chat-popout .chat-message:not(.sfrpg.chat-card),
.system-sfrpg.system-sfrpg #chat-log .message:not(.sfrpg.chat-card),
.system-sfrpg.system-sfrpg .chat-message:not(.sfrpg.chat-card) {
  background: none;
  color: var(--sfmod-text-on-background); 
}

/* Chat form */
.system-sfrpg.system-sfrpg #chat-form textarea {
  background: var(--sfmod-color-background) !important;
  color: var(--sfmod-text-on-background) !important;
  border-color: var(--sfmod-border-on-background-light) !important;
}

/* Chat cards - Only style dice roll and similar content cards that need better contrast */
.system-sfrpg.system-sfrpg .chat-message .dice-roll,
.system-sfrpg.system-sfrpg .chat-message .dice-tooltip,
.system-sfrpg.system-sfrpg .sfrpg.chat-card.dice-roll,
.system-sfrpg.system-sfrpg .sfrpg.chat-card[data-type="dice-roll"] {
  background: linear-gradient(135deg, rgba(43, 45, 49, 0.4), rgba(35, 37, 41, 0.5)) !important;
  color: var(--sfmod-text-on-background) !important;
  border-radius: 6px !important;
  padding: 8px !important;
  margin: 4px 0 !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

/* Ensure better contrast for light text elements in dice rolls and similar cards */
.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-total,
.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-formula,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-total,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-formula {
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

/* Preserve system success/failure colors for dice rolls */
.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-total.success,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-total.success {
  color: #4ade80 !important; /* Light green for success */
  text-shadow: 0 0 8px rgba(74, 222, 128, 0.6), 1px 1px 2px rgba(0, 0, 0, 0.8) !important;
}

.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-total.failure,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-total.failure {
  color: #f87171 !important; /* Light red for failure */
  text-shadow: 0 0 8px rgba(248, 113, 113, 0.6), 1px 1px 2px rgba(0, 0, 0, 0.8) !important;
}

/* Critical success - bright green */
.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-total.critical-success,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-total.critical-success {
  color: #00ff41 !important;
  text-shadow: 0 0 12px rgba(0, 255, 65, 0.8), 1px 1px 2px rgba(0, 0, 0, 0.8) !important;
  font-weight: bold !important;
}

/* Critical failure - bright red */
.system-sfrpg.system-sfrpg .chat-message .dice-roll .dice-total.critical-failure,
.system-sfrpg.system-sfrpg .dice-tooltip .dice-total.critical-failure {
  color: #ff2941 !important;
  text-shadow: 0 0 12px rgba(255, 41, 65, 0.8), 1px 1px 2px rgba(0, 0, 0, 0.8) !important;
  font-weight: bold !important;
}

.system-sfrpg.system-sfrpg .sfrpg.chat-card .card-buttons button {
  background: var(--sfmod-color-background) !important;
  color: var(--sfmod-text-on-background) !important;
  border-color: var(--sfmod-border-on-background) !important;
}
